php_parameters_check php参数校验

1.背景：php作为若类型语言，在类型的实用中非常灵活，在函数的执行过程中不对参数进行类型判断；这种方式使得利用php进行开发在类型的使用中比较灵活方便。但灵活是一把双刃剑，在很多场景下，函数的参数部分需要符合特定条件的（类型，是否可空），尤其是一些remote api或action等会被外部调用函数通过在函数的开头前段部分都会对参数进行校验，这样的方式会有几种不足：
    1)代码的可读性变差，函数中充斥着参数校验的代码，尤其是当参数特别多时；
    2)不同的开发者对参数的校验方式不同，可能会在参数校验中引入缺陷，如：
    val=intval($val);
    if($val<=0){
    //参数错误
    }
    当$val参数为'2a'、'3.14'等值时，不能暴露出参数的问题;
    3)繁冗的参数校验带来不必要的开发代价;
    4）单元测试时，为覆盖参数判断 的branch，需要引入很多case;

2.参数校验逻辑并不复杂，参数类型也是有限的，本着不重复造轮子的原则，抽象出通用的参数校验方法；
3.通用参数校验需要解决一下几个问题：
    1)实现参数校验，不需要对原有代码进行很多修改，无较强的侵入性；
    2)不同的项目中，对参数的检验结果的返回有不同的格式和结果的需求，需要可扩展；
    3)参数校验过程需要比较高的性能，不能在参数校验中有太多的耗时；
1、通过AOP框（应用https://github.com/AOP-PHP/AOP）架实现切面编程模型，在函数执行前切入进行参数校验；<br>
2、通过注释化方式实现参数类型标识，无需修改被校验函数体；
3、项目中实现了校验结果，亦可通过实现抽象类在项目中自定义校验结果；
4、参数校验是通过反射实现，为减少重复反射带来的性能开销，缓存了反射结果，现已实现了简单的文件缓存，项目中亦可重载缓存实现；
