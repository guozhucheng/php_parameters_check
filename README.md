php parameters check php参数校验

1.背景：php作为弱类型语言，在类型的实用中非常灵活，在函数的执行过程中不对参数进行类型判断；这种方式使得利用php进行开发在类型的使用中比较灵活方便。但灵活是一把双刃剑，在很多场景下，函数的参数部分需要符合特定条件的（类型，是否可空），尤其是一些remote api或action等会被外部调用函数通过在函数的开头前段部分都会对参数进行校验，这样的方式会有几种不足：
    1)代码的可读性变差，函数中充斥着参数校验的代码，尤其是当参数特别多时；
    2)不同的开发者对参数的校验方式不同，可能会在参数校验中引入缺陷，如：
    val=intval($val);
    if($val<=0){
    //参数错误
    }
    当$val参数为'2a'、'3.14'等值时，不能暴露出参数的问题;
    3)繁冗的参数校验带来不必要的开发代价;
    4）单元测试时，为覆盖参数判断的branch代码，需要引入很多case;

2.参数校验逻辑并不复杂，参数类型也是有限的，本着不重复造轮子的原则，抽象出通用的参数校验方法；

3.通用参数校验需要解决一下几个问题:

    1)实现参数校验，不需要对原有代码进行很多修改，无较强的侵入性；
    方案：
        a.通过面向切片编程的方式，在函数执行前动态的执行参数校验，这里我实现了简单的aop编程，在模块的aop目录下，通过工厂类的实例植入到AopClass利用php的魔术方法__call在函数执行前执行参数检查;
        在实际的项目中，可以使用一些aop的扩展如(https://github.com/AOP-PHP/AOP)来实现完全无感知的切面注入；
        b.php的参数表中，并无参数类型，通过反射获取到函数的注释部分，解析参数的注释内容来作为参数校验的规则；

    2)不同的项目中，对参数的检验结果的返回有不同的格式和结果的需求，需要可扩展；
    方案：为实现可扩展的参数校验结果，参数结果实现IParamCheckResult，不同的项目可以用不过的实现类，实现自定义的结果定义

    3)参数校验过程需要比较高的性能，不能在参数校验中有太多的耗时；
    方案：参数检验过程需要通过反射来解析函数注释，为减少频繁的反射引起的性能开销，将反射的结果进行缓存，缓存的实现可通过实现IDataCache接口来扩展不同的缓存实现

4.启动Demo.php进行演示
PS:php_parameters_check项目以加入个人的github开源项目中，可访问https://github.com/guozhucheng/php_parameters_check来follow项目的更新
